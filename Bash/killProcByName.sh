#!/bin/bash

# Проверяем, что передано имя процесса в качестве аргумента
if [ -z "$1" ]
then
    # Если имя процесса не передано, выводим сообщение об ошибке и завершаем скрипт
    echo "Ошибка: не указано имя процесса"
    exit 1
fi

# Получаем PID процесса по его имени
pid=$(pgrep "$1")

# Если процесс не найден, выводим сообщение об ошибке и завершаем скрипт
if [ -z "$pid" ]
then
    echo "Ошибка: процесс '$1' не найден"
    exit 1
fi

# Завершаем процесс и все его потомки
pkill -P "$pid"

# Проверяем, что процесс успешно завершился
if [ $? -eq 0 ]
then
    echo "Процесс '$1' успешно завершен, включая его потомков:"
    # Получаем список завершенных процессов
    pids=$(pgrep -P "$pid")
    # Выводим список завершенных процессов
    echo "$pids"
else
    # Если завершение процесса было неудачным, выводим сообщение об ошибке
    echo "Ошибка: не удалось завершить процесс '$1'"
    exit 1
fi
